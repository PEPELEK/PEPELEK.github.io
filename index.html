<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Oyun Sitesi Demo</title>
<style>
body { font-family: Arial; background:#f4f4f4; margin:0; padding:0;}
header { background:#222; color:white; padding:10px; display:flex; justify-content:space-between; align-items:center;}
button {padding:5px 10px; margin-left:5px; cursor:pointer;}
#login, #main { max-width:600px; margin:50px auto; background:white; padding:20px; border-radius:5px;}
input {padding:5px; margin:5px 0; width:100%;}
h2 {margin-top:0;}
.product {margin:10px 0; padding:10px; border:1px solid #ccc; border-radius:5px;}
</style>
</head>
<body>

<div id="login">
    <h2>Giriş Yap / Kayıt Ol</h2>
    <input type="text" id="username" placeholder="Kullanıcı Adı"><br>
    <input type="password" id="password" placeholder="Şifre"><br>
    <button onclick="login()">Giriş Yap</button>
    <button onclick="register()">Kayıt Ol</button>
    <p id="login-msg" style="color:red;"></p>
</div>

<div id="main" style="display:none;">
    <header>
        <div>
            Hoşgeldin, <span id="display-name"></span>
        </div>
        <div>
            <button onclick="showBalance()">Bakiye</button>
            <button onclick="logout()">Çıkış Yap</button>
            <button onclick="copyText()">Kopyala</button>
        </div>
    </header>

    <h2>Market</h2>
    <div id="market"></div>

    <h2>Bildirim Bırak</h2>
    <input type="text" id="notification" placeholder="Bildirim yazın">
    <button onclick="leaveNotification()">Gönder</button>
</div>

<script>
// Demo veri
let users = [];
let products = [
    {name:"Kılıç", price:50},
    {name:"Kalkan", price:30},
    {name:"Can Yenileme", price:20}
];
let currentUser = null;

function register() {
    let u = document.getElementById("username").value.trim();
    let p = document.getElementById("password").value.trim();
    if(!u || !p){ alert("Kullanıcı adı ve şifre gerekli."); return; }

    if(users.find(x=>x.username===u)){ 
        document.getElementById("login-msg").innerText="Bu kullanıcı zaten var.";
        return;
    }

    users.push({username:u,password:p,balance:100,notifications:[]});
    loginUser(u);
}

function login() {
    let u = document.getElementById("username").value.trim();
    let p = document.getElementById("password").value.trim();
    let user = users.find(x=>x.username===u && x.password===p);
    if(user){
        loginUser(u);
    } else {
        document.getElementById("login-msg").innerText="Hesap bulunamadı.";
    }
}

function loginUser(username){
    currentUser = users.find(x=>x.username===username);
    document.getElementById("display-name").innerText = currentUser.username;
    document.getElementById("login").style.display="none";
    document.getElementById("main").style.display="block";
    showMarket();
}

function logout(){
    currentUser = null;
    document.getElementById("login").style.display="block";
    document.getElementById("main").style.display="none";
}

function showBalance(){
    alert("Mevcut bakiye: "+currentUser.balance);
}

function copyText(){
    navigator.clipboard.writeText("eldryasmp.aternos.me");
    alert("Kopyalandı!");
}

function showMarket(){
    let marketDiv = document.getElementById("market");
    marketDiv.innerHTML = "";
    products.forEach((p,i)=>{
        let div = document.createElement("div");
        div.className="product";
        div.innerHTML = `Ürün: ${p.name} - Bakiye: ${p.price} <button onclick="buyProduct(${i})">Satın Al</button>`;
        marketDiv.appendChild(div);
    });
}

function buyProduct(index){
    let p = products[index];
    if(currentUser.balance>=p.price){
        currentUser.balance -= p.price;
        alert(p.name+" satın alındı!");
    } else {
        alert("Yeterli bakiye yok!");
    }
}

function leaveNotification(){
    let text = document.getElementById("notification").value.trim();
    if(text){
        currentUser.notifications.push(text);
        document.getElementById("notification").value="";
        alert("Bildirim gönderildi!");
    }
}
</script>

</body>
</html>
